# springCloud

## 说说你对springCloud的了解？
springCloud是一个相对比较新的微服务框架，它集成了众多开源的框架，利用Spring Boot的开发便利性实现了服务治理、服务注册与发现、负载均衡、数据监控，REST API发布方式等，基本囊括了分布式框架所需要的所有功能。是一套易开放、易部署、易维护的分布式开发工具包，要使用springCloud框架呢我们首先需要创建一个服务注册中心Eureka，创建Eureka呢首先需要搭建一个springCloud微服务，然后再启动类上面加上一个注解@EnableEurekaServer,然后只需要再application.yml配置文件中配置Eureka的连接信息,这样Eureka就配置好了，通常情况下为了方便，我们一般将这个Eureka服务呢是打成war包，然后配置bat启动文件，每次只需要直接使用bat文件启动就可以了，这样注册中心就已经完成了。  

然后呢我们需要配置一个服务提供者用来提供服务，服务提供者呢也是一个单独的微服务，需要在注册中心进行注册，也就是在application.yml里面配置注册中心Eureka的连接信息，然后在启动类上面加上@EnableEurekaClient注解，表明是一个eurekaclient。这样服务中心也就配置好了。   

紧接着我们需要创建一个服务消费者用来调用服务提供者提供的方法，springCloud中有两种服务调用方式，一种是ribbon，另一种是feign。ribbon是一个负载均衡客户端，可以很好的控制htt和tcp的一些行为，而Feign默认集成了ribbon，所以我们一般使用的是Feign作为服务消费者，feign需要在它的pom文件引入Feign的起步依赖spring-cloud-starter-feign、Eureka的起步依赖spring-cloud-starter-eureka、Web的起步依赖spring-boot-starter-web，需要在启动类上面加上@EnableFeignClients这个注解，开启Feign的功能，然后在application.yml配置文件中配置注册中心Eureka的地址，这样服务消费者就配置好了，然后我们需要在service的接口中调用服务提供者提供的服务，只需要在接口上面加上@FeignClient(value = "要调用的服务名")指明要调用的服务名称，然后再方法上面使用@RequestMapping注解,value值要和那个服务提供者里面的value值保持一致，并且如果方法有参数的话需要使用@RequestParam这个注解,这样服务消费者就可以调用服务提供者的服务了。  

为了保证其高可用，单个服务通常会集群部署。由于网络原因或者自身的原因，服务并不能保证100%可用，如果单个服务出现问题，调用这个服务就会出现线程阻塞，此时若有大量的请求涌入，Servlet容器的线程资源会被消耗完毕，导致服务瘫痪。服务与服务之间的依赖性，故障会传播，会对整个微服务系统造成灾难性的严重后果，这就是服务故障的“雪崩”效应，为了解决这个问题，springCloud提供了断路器，其实就是在服务之间调用的时候发生异常的一种解决方案，当异常产生的时候呢就不再调用服务提供者的方法了，而是执行我们配置好的回调方法，一般我们是用这个方法返回一也异常的提示信息。Feign是自带断路器的，在D版本的Spring Cloud中，它没有默认打开。需要在配置文件中配置打开它，在配置文件添加feign.hystrix.enabled=true打开，然后我们需要修改service接口上的@FeignClient(value = "要调用的服务名")后面加上fallback = 回调函数的类名.class，然后创建一个回调函数的类，并且实现这个接口，重写当前方法，方法内容一般为返回的提示信息，这样断路器也就配置好了。   

路由网关Zuul的主要功能是路由转发和过滤器，我们需要创建一个新的微服务，在pom文件里面添加spring-cloud-starter-zuul，之后再启动类上面加上@EnableZuulProxy，开启zuul的功能，然后需要在application.yml配置文件中配置Eureka注册中心和Zull的配置信息。zuul不仅只是路由，并且还能过滤，做一些安全验证。



## SpringBoot和SpringCloud
SpringBoot是Spring的一套快速配置的脚手架，可以基于SpringBoot快速开发单个微服务
SpringCloud是基于SpringBoot实现的；
SpringBoot专注于快速，方便集成的单个微服务个体，SpringCloud关于全局的服务整理框架；
SpringBoot使用了约束优于配置的理念，很多集成方案已经帮你选择好了，能不配置基就不配置，SpringCloud很大的一部分是基于SpringBoot来实现，SpringBoot可以离开SpringCloud独立使用开发项目。但是SpringCloud离不开SpringBoot,属于依赖关系；
SpringBoot在SpringCloud中起到承上启下的作用，如果你要学习SpringCloud必须要学习SpringBoot.
